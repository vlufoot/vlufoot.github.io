---
layout: post
title: "R"
excerpt_separator: "<!--more-->"
categories:
  - Data Science
tags:
  - R
---


## 기본 환경설정

- Tools -> Code -> Check *Soft-wrap R source files* 소스창 안에서만 코드 입력되게 해요
- Tools -> Project Options -> Code Editing -> Text encoding: **UTF-8**

## 패키지 설치

```r
install.packages("xxxx")
library(xxxx)

library(ggplot2) # 시각화
library(dplyr) # 전처리
```

## Variable

```r
temp1 <- 1
temp2 <- "i'm a man"
temp3 <- c(1,2,3,4,5)
temp4 <- c(1:5)
temp5 <- seq(1,10,by=2)
```

## read

```r
# csv 파일
b <- read.csv("example.csv", header=True, stringsAsFactors=F)

# SPSS,SAS 데이터 read
library(foreign)


# 엑셀 데이터 read
library(readxl)
apart <- read_excel("아파트매매실거래가_1월.xlsx", col_names=TRUE)


# txt 파일
system.time(shop<-read.table("쇼핑업종상품구매.txt",
                             sep=",",
                             header=TRUE,
                             encoding="UTF-8",
                             stringsAsFactors=FALSE))

# 용량 큰 파일
installed.packages("data.table")
library(data.table)
system.time(shop<-fread("쇼핑업종상품구매.txt",
                        sep=",",
                        header=TRUE,
                        encoding="UTF-8",
                        stringsAsFactors=FALSE))



# data.frame이 확장된 data.table은 매우 배워볼 가치가 큰 것 같다.
# 10개 variable에 300만건 정도 있는 데이터 기준으로 50배 빨랐다(25초 vs 0.5초)
# 조인할때도 엄청 빠르다함 찾아보자!


```


## csv 저장하기
```r
wirte.csv(finish, file="finish.csv")
```



## 속성이름 바꾸기

```r
apart <- rename(apart,
                gu=구,
                area_m2=`전용면적(㎡)`,
                Cdate=계약년월,
                pirce = `거래금액(만원)`,
                price_per_m2 = `제곱미터당거래가격(만원)`)
```


## exploration

```r
head(apart) # 몇개 확인해보기 좋다
apart %>% head(10) # 더 많이 확인해보고싶으면
tail(apart)
str(apart)  # 행,열 갯수 / 자료형 파악하기 좋음
table(apart$gu) # 속성안에 어떤 값들이 있는지 파악
```



## 속성바꾸기

```r
# character->numeric

is.numeric(apart$area_m2) # 속성확인 / 면적이 문자인상황..
apart$area_m2 <- as.numeric(apart$area_m2)  # numeric으로 변환
mean(apart$area_m2)   #이제 평균도 구할수있다

class(apart$price)        # 속성확인 2 / 가격도 문자인상황..
head(apart$price)         # 천단위에 쉼표가 들어있어서 그냥 바꾸면 NA들어감..
apart$price <-gsub(',','',apart$price)  # 쉼표제거하는법
apart$price<- as.numeric(apart$price)
```



```r
# character->date

class(apart$Cdate) # 속성확인 / 날짜도 문자인상황..
head(apart$Cdate)  # 년월밖에없다 검색해보니 yyyymm포맷도 라이브러리쓰면 인식하게 할수 있는것 같긴한데 그냥 1일을 붙히자
apart$Cdate <- paste(apart$Cdate, "01",sep="")
apart$Cdate <- as.Date(apart$Cdate, format="%Y%m%d")

```






## 결측치확인
```r

```





## grep 함수






